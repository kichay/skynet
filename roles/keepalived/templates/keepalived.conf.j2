global_defs {

    enable_script_security
    script_user root root

}

static_rules {

    fwmark 121 lookup 121
    fwmark 122 lookup 122
    from 5.130.78.89 lookup 121
    from 109.174.122.53 lookup 122

}

vrrp_instance "gateway" {

    notify_master "/usr/bin/systemctl start fakedhcp.timer"
    notify_backup "/usr/bin/systemctl stop fakedhcp.timer"
    notify_fault "/usr/bin/systemctl stop fakedhcp.timer"
    notify_stop "/usr/bin/systemctl stop fakedhcp.timer"

    interface skynet
    virtual_router_id 1

    authentication {

        auth_type PASS
        auth_pass skynet

    }

    virtual_ipaddress {

        192.168.128.1 dev skynet
        5.130.78.89/24 dev isp1
        109.174.122.53/26 dev isp2
        192.168.123.1/24 dev home

    }

    virtual_routes {

        0.0.0.0/0 via 5.130.78.1 dev isp1 table 121 no_track
        0.0.0.0/0 via 109.174.122.1 dev isp2 table 122 no_track
        0.0.0.0/0 via 5.130.78.1 dev isp1 metric 75 no_track

    }

}
